(this.webpackJsonpfilmclub=this.webpackJsonpfilmclub||[]).push([[0],{32:function(e,t,n){e.exports=n(47)},39:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),l=n(21),c=n.n(l),i=n(3),o=n(29),s=n(11),u=n(0),d=n.n(u),m=n(9),v=n(30),f=n(16),g=n(19),p=(Object(v.a)({apiKey:"AIzaSyBJbuJKTr2LSUgOEb5ugACh4YyP_PLqczU",authDomain:"movie-database-84f3f.firebaseapp.com",databaseUrl:"https://anetacamo-store.firebaseio.com",projectId:"movie-database-84f3f",storageBucket:"movie-database-84f3f.appspot.com",messagingSenderId:"866806633132",appId:"1:866806633132:web:48fa3c36dc7d4457920509"}),Object(g.b)()),b=Object(f.c)();function E(e,t){return Object(g.a)(p,e,t)}function h(e,t){return Object(g.d)(p,e,t)}function O(){var e=Object(a.useState)(),t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){return Object(g.c)(p,(function(e){return r(e)}))}),[]),n}n(39);function N(e){var t=e.moviesList,n=e.handleClick,a=e.listName,l=t.sort((function(e,t){return e.original_language>t.original_language?1:-1}));return r.a.createElement("div",{className:"movie-listing"},r.a.createElement("h5",null,r.a.createElement("span",{className:"red underlined"},a)," ",l.length),(null===l||void 0===l?void 0:l.length)>0&&l.map((function(e){var t;return r.a.createElement("h5",{key:e.id,onClick:function(){return n(e)}},e.title,r.a.createElement("span",{className:"red"},null===(t=e.release_date)||void 0===t?void 0:t.substring(0,4)),r.a.createElement("span",{className:"red language"},e.original_language))})))}function j(e){var t=e.featured,n=e.onClick,a=e.icon,l=e.type,c="fa ".concat(a," ").concat(!t&&" black");return console.log("type: ",l),r.a.createElement("i",{onClick:function(){return n({type:l})},className:c,"aria-hidden":"true"})}function y(e){var t=e.handleDownload,n=e.handleOpen,l=Object(a.useState)(""),c=Object(m.a)(l,2),i=c[0],o=c[1],s=Object(a.useState)(""),u=Object(m.a)(s,2),v=u[0],f=u[1],g=Object(a.useState)(!1),p=Object(m.a)(g,2),b=p[0],O=p[1],N=Object(a.useState)(""),j=Object(m.a)(N,2),y=j[0],w=j[1],S=Object(a.useState)(!1),C=Object(m.a)(S,2),_=C[0],x=C[1],I=Object(a.useState)(!1),D=Object(m.a)(I,2),L=D[0],T=D[1];return r.a.createElement("div",{className:"signup-form"},r.a.createElement(k,{placeholder:"Your Mail",value:i,type:"email",onInputChange:function(e){return o(e)}}),r.a.createElement(k,{placeholder:"Your Password",value:v,type:"password",onInputChange:function(e){return f(e)}}),r.a.createElement("p",{style:{marginTop:-4}},"*your data will not be shared with anybody else."),_||r.a.createElement("button",{disabled:b,onClick:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,d.a.awrap(E(i,v));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w(y);case 9:O(!1),x(!0),n(!1);case 12:case"end":return e.stop()}}),null,null,[[1,6]])}},"signup"),r.a.createElement("button",{disabled:b,onClick:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,d.a.awrap(h(i,v));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w(y);case 9:O(!1),console.log("logged in. download movies now!"),t(),n(!1),console.log("CLOSED THE TAB!");case 14:case"end":return e.stop()}}),null,null,[[1,6]])}},"login"),""!==y&&y,_&&r.a.createElement("p",null,"thanks for registering!"),r.a.createElement("h5",{className:"red underlined",onClick:function(){return T(!L)}},"Do I have to sign up?"),L&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"when you sign up you can save movies and access them from different computers. ",r.a.createElement("br",null),"And your list will not be deleted upon clearing browser data.")))}function k(e){var t=e.type,n=e.placeholder,a=e.value,l=e.onInputChange,c=e.required,i=e.nameClass;return r.a.createElement("input",{className:i,placeholder:n,type:t||"text",value:a,onChange:function(e){return l(e.target.value)},required:c})}var w=function(e){var t,n,a,l=e.movie,c=e.handleFeatured,i=e.storedMovies,o=O();return r.a.createElement("div",{className:"film-details container"},l?r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("span",null,l.title),l.title!==l.original_title?r.a.createElement("span",{className:"red"}," ",l.original_title):null),o&&r.a.createElement(j,{onClick:c,featured:null===(t=i.find((function(e){return e.id===l.id})))||void 0===t?void 0:t.like,icon:"fa-heart",type:"like"}),o&&r.a.createElement(j,{onClick:c,featured:null===(n=i.find((function(e){return e.id===l.id})))||void 0===n?void 0:n.suggested,icon:"fa-lightbulb-o",type:"suggested"}),r.a.createElement("span",{className:"red bold"},l.vote_average),l.runtime&&r.a.createElement("span",null," ",l.runtime," min"),r.a.createElement("p",null,l.overview),r.a.createElement("p",null,r.a.createElement("b",null,"release date")," ",l.release_date,r.a.createElement("br",null),r.a.createElement("b",null,"original language")," ",l.original_language,r.a.createElement("br",null)),r.a.createElement("br",null),o?r.a.createElement("button",{className:"small",onClick:function(){return c({type:"suggested"})}},(null===(a=i.find((function(e){return e.id===l.id})))||void 0===a?void 0:a.suggested)?"UNVOTE":"VOTE FOR THIS"):r.a.createElement("h5",{className:"purple"},"login or sign up to vote")):r.a.createElement("p",null))};function S(e){var t=e.storedMovies,n=e.handleSelectedMovie,l=Object(a.useState)(!1),c=Object(m.a)(l,2),i=c[0],o=c[1],s=Object(a.useState)(null),u=Object(m.a)(s,2),v=u[0],f=u[1],g=Object(a.useState)(""),p=Object(m.a)(g,2),b=p[0],E=p[1],h=Object(a.useState)([]),O=Object(m.a)(h,2),N=O[0],j=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(k,{nameClass:"search-field",placeholder:"Search for a movie",value:b,onInputChange:function(e){return function(e){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(E(e),0===e.length){a.next=20;break}return o(!0),a.prev=3,a.next=6,d.a.awrap(fetch("".concat("https://api.themoviedb.org/3/","search/movie?api_key=").concat("4cb1eeab94f45affe2536f2c684a5c9e","&query=").concat(e)));case 6:return t=a.sent,a.next=9,d.a.awrap(t.json());case 9:n=a.sent,j(n.results),o(!1),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(3),f("Something went wrong"),o(!1);case 18:a.next=21;break;case 20:f("Search needs letters");case 21:case"end":return a.stop()}}),null,null,[[3,14]])}(e)}})),r.a.createElement("div",{className:"underline"}),r.a.createElement(C,{loading:i,erorr:v,query:b,movies:N,storedMovies:t,handleSelectedMovie:n}))}function C(e){var t=e.loading,n=e.error,a=e.query,l=e.movies,c=e.storedMovies,i=e.handleSelectedMovie;return r.a.createElement("div",{className:"results movie-listing container"},r.a.createElement("h5",null,t?"Loading...":n),0!==a.length&&0!==l.length?l.map((function(e){var t,n;return r.a.createElement("h5",{key:e.id,onClick:function(){return i(e)}},e.title," ",r.a.createElement("span",{className:"purple"},null===(t=e.release_date)||void 0===t?void 0:t.substring(0,4)),(n=e.id,c.some((function(e){return e.id===n}))&&r.a.createElement("i",{className:"fa fa-star red"})))})):r.a.createElement("h5",null,"No movies found"))}function _(e){var t=e.movies,n=e.handleClick,a=e.listName,l=Object.values(t.reduce((function(e,t){var n=t.id;return e[n]=e[n]||{id:n,count:0},e[n].count++,e}),{}));function c(e){return t.find((function(t){return t.id===e}))}return l.sort((function(e,t){return e.count<t.count?1:-1})),r.a.createElement("div",{className:"movie-listing",style:{backgroundColor:"black",color:"white",padding:"16px 20px",marginRight:"-20px"}},r.a.createElement("h5",{className:"purple bold",style:{marginRight:0}},a),(null===t||void 0===t?void 0:t.length)>0&&l.map((function(e){return r.a.createElement("h5",{key:e.id,onClick:function(){return n(c(e.id))}},c(e.id).title,r.a.createElement("span",{className:"red"},c(e.id).release_date.substring(0,4)),r.a.createElement("span",{className:"red language"},c(e.id).original_language),r.a.createElement("span",{className:"purple bolded bold"},e.count))})))}var x=n(20),I=function(){return{type:"OPEN"}};function D(e){var t=e.saved,n=e.handleSave,a=e.handleDownload,l=O(),c=Object(x.c)((function(e){return e.isOpen})),i=Object(x.b)();return r.a.createElement("div",{className:"user-greet ".concat(c&&"open")},r.a.createElement("div",{className:"form-head container flex"},r.a.createElement("div",null,l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{marginTop:0}},"hi ",null===l||void 0===l?void 0:l.email.split("@")[0]),r.a.createElement("p",{className:"red underlined",onClick:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.awrap(Object(g.e)(p));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("something went wrong");case 8:i({type:"OPEN"});case 9:case"end":return e.stop()}}),null,null,[[0,5]])}},"logout"))),l&&r.a.createElement("button",{className:"small ".concat(!t||"green"),onClick:n},t?"saved":"submit your choices!"),!l&&!c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"small",onClick:function(){return i({type:"OPEN"})}},"LOGIN"),r.a.createElement("button",{className:"small",onClick:function(){return i({type:"OPEN"})}},"SIGNUP")),c&&r.a.createElement("div",{className:"line-container",onClick:function(){return i({type:"OPEN"})}},r.a.createElement("div",{className:"line first"}),r.a.createElement("div",{className:"line"}))),I&&r.a.createElement(y,{handleDownload:a,handleOpen:function(){return i({type:"OPEN"})}}))}n(46);var L=n(23),T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN":return!e;default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return!e;default:return e}},P=Object(L.a)({isOpen:T,isLoading:M}),J=Object(L.b)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(x.a,{store:J},r.a.createElement((function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),u=Object(m.a)(c,2),v=u[0],g=u[1],p=Object(a.useState)(!1),E=Object(m.a)(p,2),h=E[0],j=E[1],y=O(),k=Object(a.useState)(!1),C=Object(m.a)(k,2),x=C[0],I=C[1],L=Object(a.useState)([]),T=Object(m.a)(L,2),M=T[0],P=T[1];function J(e,t){console.log("featured changed",t);var n=!0!==e[t]||void 0;console.log("feature state",n);var a=Object(o.a)({},e,Object(i.a)({},t,n));console.log("updated movie like: ",a.like,a.suggested);var r=function(e){return["title","id","seen","like","suggested","original_title","release_date","original_language","vote_average","overview"].reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}(a);l(r),console.log("simplified movie like: ",r.like,r.suggested);var c,u=function(e){var t,n=v.filter((function(t){return t.id!==e.id}));return t=e.id,v.some((function(e){return e.id===t}))?void 0===e.like&&void 0===e.suggested?Object(s.a)(n):[].concat(Object(s.a)(n),[e]):[].concat(Object(s.a)(v),[e])}(r);console.log(r),console.log(u),c=u,console.log("saving movies to local storage"),localStorage.setItem("films",JSON.stringify(c)),g(c),j(!1)}return Object(a.useEffect)((function(){return console.log("useEffect run"),Object(f.d)(Object(f.a)(b,"users"),(function(e){console.log(e.docs);var t=[],n=e.docs.map((function(e){var n=JSON.parse(e.data().movies);console.log(JSON.parse(e.data().movies)),n!==[]&&n.filter((function(e){e.suggested&&t.push(e)}))}));if(console.log("alluser",n),P(t),console.log(t),y){var a=e.docs.filter((function(e){return e.id===y.uid}));if(void 0===a[0]){!function(){var e,t;d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=Object(f.b)(b,"users",y.uid),t={movies:localStorage.getItem("films")},n.next=4,d.a.awrap(Object(f.e)(e,t));case 4:case"end":return n.stop()}}))}(),j(!0)}else{var r=JSON.parse(a[0].data().movies);null!==r&&g(r.filter((function(e){return null!==e&&"id"in e})))}}}))}),[x,y]),r.a.createElement("div",{className:"search"},r.a.createElement(S,{storedMovies:v,handleSelectedMovie:function(e){return l(e)}}),r.a.createElement(D,{saved:h,handleSave:function(){return function(e){var t,n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("saving movies to online db"),void 0!==y&&null!==y){a.next=5;break}j(!1),a.next=10;break;case 5:return t=Object(f.b)(b,"users",y.uid),n={movies:JSON.stringify(e)},a.next=9,d.a.awrap(Object(f.e)(t,n));case 9:j(!0);case 10:case"end":return a.stop()}}))}(v)},handleDownload:function(){return I(!x)}}),n&&r.a.createElement(w,{movie:n,handleFeatured:function(e){return J(n,e.type)},storedMovies:v}),r.a.createElement("div",{className:"favourite-movies container"},y&&r.a.createElement(N,{listName:"your liked movies",moviesList:v.filter((function(e){return e.like})),handleClick:l}),y&&r.a.createElement(N,{listName:"your suggested movies",moviesList:v.filter((function(e){return e.suggested})),handleClick:l}),r.a.createElement(_,{listName:"suggested by all",movies:M,handleClick:l})))}),null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.320e33de.chunk.js.map