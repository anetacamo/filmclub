{"version":3,"sources":["firebase.js","components/favouriteMovies.js","components/featured.js","components/form.js","components/input.js","components/movieDetails.js","components/search.js","components/searchResults.js","components/stars.js","components/suggestedMovies.js","actions/index.js","components/userForm.js","reducers/isOpen.js","reducers/isLoading.js","reducers/index.js","index.js","components/App.js"],"names":["auth","initializeApp","apiKey","process","authDomain","databaseUrl","projectId","storageBucket","messagingSenderId","appId","getAuth","getFirestore","signup","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","useAuth","useState","currentUser","setCurrentUser","useEffect","onAuthStateChanged","user","FavouriteMovies","moviesList","handleClick","listName","movies","sort","a","b","original_language","className","length","map","movie","key","id","onClick","title","release_date","substring","Featured","featured","icon","type","classes","aria-hidden","Form","handleDownload","handleOpen","mail","setMail","setPassword","loading","setLoading","error","setError","success","setSuccess","openInfo","setOpenInfo","Input","placeholder","value","onInputChange","e","style","marginTop","disabled","async","console","log","required","nameClass","onChange","target","MovieDetails","handleFeatured","storedMovies","original_title","find","film","like","suggested","popularity","vote_average","runtime","overview","Search","handleSelectedMovie","query","setQuery","setMovies","q","fetch","response","json","results","handleSearchChange","SearchResults","erorr","movieId","some","Stars","stars","rating","Math","round","i","push","j","SuggestedMovies","Object","values","reduce","count","getMovie","backgroundColor","color","padding","marginRight","open","UserForm","saved","handleSave","isOpen","useSelector","state","dispatch","useDispatch","signOut","action","isLoading","allReducers","combineReducers","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","selectedMovie","setSelectedMovie","setStoredMovies","setSaved","download","setDownload","allSuggested","setAllSuggested","onFeatureChange","feature","fState","undefined","simplified","newObj","simplifyMovie","updatedMovies","m","moviesWithoutSelected","filter","liked","updateStoredMovies","localStorage","setItem","JSON","stringify","onSnapshot","collection","db","snapshot","docs","suggestedItems","allUsersData","doc","array","parse","data","item","uid","docRef","payload","getItem","setDoc","createUserDb","moviesFromDb","saveMoviesToDb","document","getElementById"],"mappings":"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","file":"static/js/main.01633c50.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\nimport { useState, useEffect } from 'react';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseUrl: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n};\n\n// eslint-disable-next-line\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth();\n\nexport default getFirestore();\n\nexport function signup(email, password) {\n  //authentication handle needs to be provided as a first of arguments\n  return createUserWithEmailAndPassword(auth, email, password);\n}\n\nexport function login(email, password) {\n  //authentication handle needs to be provided as a first of arguments\n  return signInWithEmailAndPassword(auth, email, password);\n}\n\nexport function logout() {\n  return signOut(auth);\n}\n\n//custom hook\nexport function useAuth() {\n  const [currentUser, setCurrentUser] = useState();\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (user) => setCurrentUser(user));\n    return unsub;\n  }, []);\n  return currentUser;\n}\n","import React from 'react';\n\nexport default function FavouriteMovies({ moviesList, handleClick, listName }) {\n  const movies = moviesList.sort((a, b) =>\n    a.original_language > b.original_language ? 1 : -1\n  );\n  return (\n    <div className='movie-listing'>\n      <h5>\n        <span className='red underlined'>{listName}</span> {movies.length}\n      </h5>\n\n      {movies?.length > 0 &&\n        movies.map((movie) => (\n          <h5 key={movie.id} onClick={() => handleClick(movie)}>\n            {movie.title}\n            <span className='red'>{movie.release_date?.substring(0, 4)}</span>\n            <span className='red language'>{movie.original_language}</span>\n          </h5>\n        ))}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Featured({ featured, onClick, icon, type }) {\n  let classes = `fa ${icon} ${!featured && ' black'}`;\n  return (\n    <i\n      onClick={() => onClick({ type })}\n      className={classes}\n      aria-hidden='true'\n    />\n  );\n}\n","import React, { useState } from 'react';\nimport { signup, login } from '../firebase';\nimport { Input } from '.';\n\nexport default function Form({ handleDownload, handleOpen }) {\n  const [mail, setMail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [openInfo, setOpenInfo] = useState(false);\n\n  async function handleSignup() {\n    setLoading(true);\n    try {\n      await signup(mail, password);\n    } catch {\n      setError(error);\n    }\n    setLoading(false);\n    setSuccess(true);\n    handleOpen(false);\n  }\n  async function handleLogin() {\n    setLoading(true);\n    try {\n      await login(mail, password);\n    } catch {\n      setError(error);\n    }\n    setLoading(false);\n    console.log('logged in. download movies now!');\n    handleDownload();\n  }\n  return (\n    <div className='signup-form'>\n      <Input\n        placeholder='Your Mail'\n        value={mail}\n        type='email'\n        onInputChange={(e) => setMail(e)}\n      />\n      <Input\n        placeholder='Your Password'\n        value={password}\n        type='password'\n        onInputChange={(e) => setPassword(e)}\n      />\n      <p style={{ marginTop: -4 }}>\n        *your data will not be shared with anybody else.\n      </p>\n      {success || (\n        <button disabled={loading} onClick={handleSignup}>\n          signup\n        </button>\n      )}\n      <button disabled={loading} onClick={handleLogin}>\n        login\n      </button>\n\n      {error !== '' && error}\n      {success && <p>thanks for registering!</p>}\n      <h5 className='red underlined' onClick={() => setOpenInfo(!openInfo)}>\n        Do I have to sign up?\n      </h5>\n      {openInfo && (\n        <>\n          <p>\n            when you sign up you can save movies and access them from different\n            computers. <br />\n            And your list will not be deleted upon clearing browser data.\n          </p>\n          <p className='red'>\n            Hacking each others accounts and creating multiple fake accounts\n            <br /> and suggesting bad movies to watch is stronly unrecommended\n            and might RESULT INTO BANNING. NO MERCY\n          </p>\n        </>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Input({\n  type,\n  placeholder,\n  value,\n  onInputChange,\n  required,\n  nameClass,\n}) {\n  return (\n    <input\n      className={nameClass}\n      placeholder={placeholder}\n      type={type ? type : 'text'}\n      value={value}\n      onChange={(e) => onInputChange(e.target.value)}\n      required={required}\n    />\n  );\n}\n","import React from 'react';\nimport { Featured, Stars } from '.';\n\nconst MovieDetails = ({ movie, handleFeatured, storedMovies }) => {\n  return (\n    <div className='film-details container'>\n      {movie ? (\n        <div>\n          <h2>\n            <span>{movie.title}</span>\n            {movie.title !== movie.original_title ? (\n              <span className='red'> {movie.original_title}</span>\n            ) : null}\n          </h2>\n          <Featured\n            onClick={handleFeatured}\n            featured={storedMovies.find((film) => film.id === movie.id)?.like}\n            icon='fa-heart'\n            type='like'\n          />\n          {/*\n          <Featured\n            onClick={handleFeatured}\n            featured={storedMovies.find((film) => film.id === movie.id)?.seen}\n            icon='fa-eye'\n            type='seen'\n          /> */}\n          <Featured\n            onClick={handleFeatured}\n            featured={\n              storedMovies.find((film) => film.id === movie.id)?.suggested\n            }\n            icon='fa-lightbulb-o'\n            type='suggested'\n          />\n          <Stars popularity={movie.vote_average / 2} />\n          <span className='red bold'>{movie.vote_average}</span>\n          {movie.runtime && <span> {movie.runtime} min</span>}\n          <p>{movie.overview}</p>\n          <p>\n            <b>release date</b> {movie.release_date}\n            <br></br>\n            <b>original language</b> {movie.original_language}\n            <br></br>\n          </p>\n        </div>\n      ) : (\n        <p></p>\n      )}\n    </div>\n  );\n};\nexport default MovieDetails;\n","import React, { useState } from 'react';\nimport { Input, SearchResults } from './';\n\nexport default function Search({ storedMovies, handleSelectedMovie }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [query, setQuery] = useState('');\n  const [movies, setMovies] = useState([]);\n\n  const API_KEY = '4cb1eeab94f45affe2536f2c684a5c9e';\n  const API_URL = 'https://api.themoviedb.org/3/';\n\n  //SEARCH FUNCTION - on query change setMovies to state object\n  async function handleSearchChange(q) {\n    setQuery(q);\n    if (q.length !== 0) {\n      setLoading(true);\n      try {\n        const response = await fetch(\n          `${API_URL}search/movie?api_key=${API_KEY}&query=${q}`\n        );\n        const json = await response.json();\n        setMovies(json.results);\n        setLoading(false);\n      } catch (error) {\n        setError('Something went wrong');\n        setLoading(false);\n      }\n    } else {\n      setError('Search needs letters');\n    }\n  }\n\n  return (\n    <>\n      <div className='container'>\n        <Input\n          nameClass='search-field'\n          placeholder='Search for a movie'\n          value={query}\n          onInputChange={(e) => handleSearchChange(e)}\n        />\n      </div>\n      <div className='underline'></div>\n      <SearchResults\n        loading={loading}\n        erorr={error}\n        query={query}\n        movies={movies}\n        storedMovies={storedMovies}\n        handleSelectedMovie={handleSelectedMovie}\n      />\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function SearchResults({\n  loading,\n  error,\n  query,\n  movies,\n  storedMovies,\n  handleSelectedMovie,\n}) {\n  function isMovieHere(movieId, list) {\n    return list.some((film) => film.id === movieId);\n  }\n  return (\n    <div className='results movie-listing container'>\n      <h5>{(loading && 'Loading...') || error}</h5>\n      {query.length !== 0 && movies.length !== 0 ? (\n        movies.map((movie) => (\n          <h5 key={movie.id} onClick={() => handleSelectedMovie(movie)}>\n            {movie.title}{' '}\n            <span className='purple'>\n              {movie.release_date?.substring(0, 4)}\n            </span>\n            {isMovieHere(movie.id, storedMovies) && (\n              <i className='fa fa-star red'></i>\n            )}\n          </h5>\n        ))\n      ) : (\n        <h5>No movies found</h5>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nconst Stars = ({ popularity }) => {\n  let stars = [];\n  const rating = Math.round(popularity);\n\n  for (var i = 0; i < rating; i++) {\n    stars.push(<i className='fa fa-star' aria-hidden='true' key={i} />);\n  }\n  for (var j = 0; j < 5 - rating; j++) {\n    stars.push(<i className='fa fa-star-o' aria-hidden='true' key={j + 5} />);\n  }\n  return stars;\n};\n\nexport default Stars;\n","import React from 'react';\n\nexport default function SuggestedMovies({ movies, handleClick, listName }) {\n  let results = Object.values(\n    movies.reduce((a, { id }) => {\n      a[id] = a[id] || { id, count: 0 };\n      a[id].count++;\n      return a;\n    }, {})\n  );\n\n  results.sort((a, b) => (a.count < b.count ? 1 : -1));\n\n  function getMovie(id) {\n    const film = movies.find((movie) => movie.id === id);\n    return film;\n  }\n\n  return (\n    <div\n      className='movie-listing'\n      style={{\n        backgroundColor: 'black',\n        color: 'white',\n        padding: '16px 20px',\n        marginRight: '-20px',\n      }}\n    >\n      <h5 className='purple bold' style={{ marginRight: 0 }}>\n        {listName}\n      </h5>\n\n      {movies?.length > 0 &&\n        results.map((movie) => (\n          <h5 key={movie.id} onClick={() => handleClick(getMovie(movie.id))}>\n            {getMovie(movie.id).title}\n            <span className='red'>\n              {getMovie(movie.id).release_date.substring(0, 4)}\n            </span>\n            <span className='red language'>\n              {getMovie(movie.id).original_language}\n            </span>\n            <span className='purple bolded bold'>{movie.count}</span>\n          </h5>\n        ))}\n    </div>\n  );\n}\n","export const open = () => {\n  return {\n    type: 'OPEN',\n  };\n};\n","import React from 'react';\nimport { useAuth, logout } from '../firebase';\nimport { Form } from './';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { open } from '../actions';\n\nexport default function UserForm({ saved, handleSave, handleDownload }) {\n  const currentUser = useAuth();\n  const isOpen = useSelector((state) => state.isOpen);\n  const dispatch = useDispatch();\n\n  async function handleLogout() {\n    try {\n      await logout();\n    } catch {\n      console.log('something went wrong');\n    }\n    dispatch(open());\n  }\n  return (\n    <div className={`user-greet ${isOpen && 'open'}`}>\n      <div className='form-head container flex'>\n        <div>\n          <p style={{ marginTop: 0 }}>\n            hi, {currentUser?.email || 'unregistered!'}\n          </p>\n\n          {currentUser ? (\n            <p className='red underlined' onClick={handleLogout}>\n              logout\n            </p>\n          ) : (\n            <p className='red underlined' onClick={() => dispatch(open())}>\n              log in to save your movie list\n            </p>\n          )}\n        </div>\n        {currentUser && (\n          <button className={`small ${saved || 'gray'}`} onClick={handleSave}>\n            {saved ? 'saved' : 'save'}\n          </button>\n        )}\n        {isOpen && (\n          <div className='line-container' onClick={() => dispatch(open())}>\n            <div className='line first'></div>\n            <div className='line'></div>\n          </div>\n        )}\n      </div>\n\n      {open && (\n        <Form\n          handleDownload={handleDownload}\n          handleOpen={() => dispatch(open())}\n        />\n      )}\n    </div>\n  );\n}\n","const isOpen = (state = false, action) => {\n  switch (action.type) {\n    case 'OPEN':\n      return !state;\n    default:\n      return state;\n  }\n};\nexport default isOpen;\n","const isLoading = (state = false, action) => {\n  switch (action.type) {\n    case 'LOADING':\n      return !state;\n    default:\n      return state;\n  }\n};\nexport default isLoading;\n","import isOpen from './isOpen';\nimport isLoading from './isLoading';\nimport { combineReducers } from 'redux';\n\nconst allReducers = combineReducers({\n  isOpen,\n  isLoading,\n});\n\nexport default allReducers;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './components';\nimport 'font-awesome/css/font-awesome.css';\nimport { createStore } from 'redux';\nimport allReducers from './reducers';\nimport { Provider } from 'react-redux';\n\nconst store = createStore(\n  allReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","import React, { useState, useEffect } from 'react';\nimport {\n  FavouriteMovies,\n  MovieDetails,\n  Search,\n  SuggestedMovies,\n  UserForm,\n} from './';\nimport { useAuth } from '../firebase';\nimport db from '../firebase';\nimport { setDoc, doc, onSnapshot, collection } from 'firebase/firestore';\n\nimport '../style.scss';\n\nexport default function App() {\n  const [selectedMovie, setSelectedMovie] = useState(null);\n  const [storedMovies, setStoredMovies] = useState([]);\n  const [saved, setSaved] = useState(false);\n  const currentUser = useAuth();\n  const [download, setDownload] = useState(false);\n  const [allSuggested, setAllSuggested] = useState([]);\n\n  const removeIncomplete = (array) => {\n    const newArray = array.filter((item) => item !== null && 'id' in item);\n    return newArray;\n  };\n\n  // first get items from local storage - if exist.\n  // then : if user is signed in AND database has a movie entry with users uid - set the filmLists\n  // ADD those to the movie lisst\n  useEffect(() => {\n    // first get items from local storage - if exist.\n    console.log('useEffect run');\n    /*\n    if (localStorage.getItem('films') !== null) {\n      let moviesFromStorage = JSON.parse(localStorage.getItem('films'));\n      setStoredMovies(removeIncomplete(moviesFromStorage));\n    }\n    */\n\n    const unsubscribe = onSnapshot(collection(db, 'users'), (snapshot) => {\n      // here collect all the suggested movies and store them in suggested items in one level array.\n      console.log(snapshot.docs);\n\n      let suggestedItems = [];\n      const allUsersData = snapshot.docs.map((doc) => {\n        const array = JSON.parse(doc.data().movies);\n        console.log(JSON.parse(doc.data().movies));\n        if (array !== []) {\n          array.filter((item) => {\n            item.suggested && suggestedItems.push(item);\n          });\n        }\n      });\n      console.log('alluser', allUsersData);\n      // let suggestedItems = [];\n\n      setAllSuggested(suggestedItems);\n      console.log(suggestedItems);\n\n      // user is signed:\n      if (currentUser) {\n        const user = snapshot.docs.filter((doc) => doc.id === currentUser.uid);\n        // user has no data in db, yet - save the local storage data.\n        if (user[0] === undefined) {\n          createUserDb();\n          async function createUserDb() {\n            const docRef = doc(db, 'users', currentUser.uid);\n            const payload = { movies: localStorage.getItem('films') };\n            await setDoc(docRef, payload);\n          }\n          setSaved(true);\n          // else take the users movies from its db and set them to storedMovies\n        } else {\n          const moviesFromDb = JSON.parse(user[0].data().movies);\n          console.log(moviesFromDb);\n          if (moviesFromDb !== null) {\n            setStoredMovies(removeIncomplete(moviesFromDb));\n          }\n          //let result = _.unionBy(storedMovies, moviesFromDb, 'id');\n          //setStoredMovies(removeIncomplete(result));\n        }\n      }\n    });\n    return unsubscribe;\n  }, [download, currentUser]);\n\n  function updateStoredMovies(m) {\n    const moviesWithoutSelected = storedMovies.filter(\n      (film) => film.id !== m.id\n    );\n    let updatedMovies = storedMovies;\n    //the movie IS in the list\n    if (isMovieHere(m.id, storedMovies)) {\n      //remove it from the list ONLY if the movie has all features set to none\n      if (m.liked === undefined && m.suggested === undefined) {\n        updatedMovies = [...moviesWithoutSelected];\n      } else {\n        //otherwise update the list\n        updatedMovies = [...moviesWithoutSelected, m];\n      }\n    } else {\n      //if not here - add to the list\n      updatedMovies = [...storedMovies, m];\n    }\n    return updatedMovies;\n  }\n\n  const simplifyMovie = (movie) => {\n    const simplifiedMovie = [\n      'title',\n      'id',\n      'seen',\n      'like',\n      'suggested',\n      'original_title',\n      'release_date',\n      'original_language',\n      'vote_average',\n      'overview',\n    ].reduce((newObj, key) => {\n      movie[key] !== undefined && (newObj[key] = movie[key]);\n      return newObj;\n    }, {});\n    return simplifiedMovie;\n  };\n\n  function saveMovies(movies) {\n    console.log('saving movies');\n    localStorage.setItem('films', JSON.stringify(movies));\n    setStoredMovies(movies);\n  }\n\n  //only save to storage onclick.\n  async function saveMoviesToDb(movies) {\n    // if logged in, sent to db\n    console.log('movies saved to db');\n    if (currentUser === undefined || currentUser === null) {\n      setSaved(false);\n    } else {\n      const docRef = doc(db, 'users', currentUser.uid);\n      const payload = { movies: JSON.stringify(movies) };\n      await setDoc(docRef, payload);\n      setSaved(true);\n    }\n  }\n\n  // on feature icon click update the selected movie. then stored Movies\n  function onFeatureChange(movie, feature) {\n    const fState = movie[feature] === true ? undefined : true;\n    const updatedMovie = { ...movie, [feature]: fState };\n    const simplified = simplifyMovie(updatedMovie);\n    setSelectedMovie(simplified);\n\n    //on the feature change, update stored movies\n    const updatedMovies = updateStoredMovies(simplified);\n    saveMovies(updatedMovies);\n    setSaved(false);\n  }\n\n  function isMovieHere(movieId, list) {\n    return list.some((film) => film.id === movieId);\n  }\n\n  return (\n    <div className='search'>\n      <Search\n        storedMovies={storedMovies}\n        handleSelectedMovie={(m) => setSelectedMovie(m)}\n      />\n      <UserForm\n        saved={saved}\n        handleSave={() => saveMoviesToDb(storedMovies)}\n        handleDownload={() => setDownload(!download)}\n      />\n      {selectedMovie && (\n        <MovieDetails\n          movie={selectedMovie}\n          handleFeatured={(type) => onFeatureChange(selectedMovie, type.type)}\n          storedMovies={storedMovies}\n        />\n      )}\n      <div className='favourite-movies container'>\n        {currentUser && (\n          <FavouriteMovies\n            listName='liked movies'\n            moviesList={storedMovies.filter((movie) => movie.like)}\n            handleClick={setSelectedMovie}\n          />\n        )}\n        {/*\n        <FavouriteMovies\n          listName='seen movies'\n          moviesList={storedMovies.filter((movie) => movie.seen)}\n          handleClick={setSelectedMovie}\n        />*/}\n        {currentUser && (\n          <FavouriteMovies\n            listName='suggested movies'\n            moviesList={storedMovies.filter((movie) => movie.suggested)}\n            handleClick={setSelectedMovie}\n          />\n        )}\n        <SuggestedMovies\n          listName='suggested by all'\n          movies={allSuggested}\n          handleClick={setSelectedMovie}\n        />\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}